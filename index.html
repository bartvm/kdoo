<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KDOO Game</title>
    <!-- Google Fonts: Montserrat -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        /* --- CSS Variables --- */
        :root {
            --font-primary: 'Montserrat', sans-serif;
            --color-bg: #f8f8f0;
            --color-text-default: #333;
            --color-text-title: #4a4a4a;
            --color-light-gray: #ccc;
            --color-white: #fff;
            --font-weight-medium: 500;
            --font-weight-semibold: 600;
        }

        /* --- Global Reset --- */
        * {
            box-sizing: border-box;
        }

        /* --- Main Layout --- */
        body {
            background-color: var(--color-bg);
            font-family: var(--font-primary);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            margin: 0;
            padding: 5vh 10px 20px 10px;
            color: var(--color-text-default);
            overflow-x: hidden;
        }
        
        .title {
            font-size: 3em;
            font-weight: var(--font-weight-semibold);
            color: var(--color-text-title);
            margin-bottom: 80px;
            text-transform: uppercase;
        }

        /* --- Game Area --- */
        .game-container {
            display: flex;
            align-items: baseline;
            justify-content: center;
            width: 100%;
            max-width: 700px;
            margin-bottom: 80px;
        }

        .input-text {
            font-family: var(--font-primary);
            font-size: 2.5em;
            border: none;
            border-bottom: 3px solid transparent;
            background-color: transparent;
            outline: none;
            padding: 0;
            width: auto;
            min-width: 0;
            transition: border-color 0.3s ease;
            text-transform: uppercase;
        }

        #input-before { text-align: right; }
        #input-after { text-align: left; }

        .input-text::placeholder {
            color: var(--color-light-gray);
        }
        
        .input-text:focus {
             caret-color: var(--color-text-default);
             border-bottom-color: var(--color-light-gray);
        }

        .input-text:disabled {
            color: var(--color-text-default);
        }

        #given-letters {
            font-size: 2.5em;
            padding: 0;
            user-select: none;
            text-transform: uppercase;
            flex-shrink: 0;
            line-height: 1;
        }

        /* --- State Changes --- */
        .game-container.solved .input-text,
        .game-container.solved #given-letters {
            font-weight: var(--font-weight-medium);
        }
        
        /* --- Controls --- */
        .controls {
            display: flex;
            justify-content: center; 
            gap: 15px;
            width: 100%; 
            max-width: 700px; 
        }

        .button {
            font-size: 1em;
            font-weight: var(--font-weight-semibold);
            background-color: var(--color-white);
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .button:hover {
            box-shadow: 0 7px 14px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        .button:active {
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transform: translateY(1px);
        }
    </style>
</head>
<body>

    <h1 class="title">KDOO</h1>

    <div class="game-container">
        <input type="text" id="input-before" class="input-text" placeholder="">
        <span id="given-letters"></span>
        <input type="text" id="input-after" class="input-text" placeholder="">
    </div>

    <div class="controls">
        <button id="new-button" class="button">New</button>
        <button id="reset-button" class="button">Reset</button>
        <button id="solution-button" class="button">Solution</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- List of all available problems ---
            const problemsList = [
                { given: "RLDW", solution: "WORLDWIDE" },
                { given: "ETPL", solution: "MARKETPLACE" },
                { given: "UIPM", solution: "EQUIPMENT" },
                { given: "CKGR", solution: "BACKGROUND" },
                { given: "HNIQ", solution: "TECHNIQUE" },
                { given: "DITU", solution: "EXPENDITURE" },
                { given: "OTWI", solution: "NOTWITHSTANDING" },
                { given: "LOPM", solution: "DEVELOPMENT" },
                { given: "LTHC", solution: "HEALTHCARE" },
                { given: "WSPA", solution: "NEWSPAPER" },
                { given: "OWJO", solution: "BLOWJOB" },
                { given: "HDRA", solution: "WITHDRAW" },
                { given: "RLIA", solution: "PARLIAMENT" },
                { given: "ADQU", solution: "HEADQUARTER" },
                { given: "RTFO", solution: "PORTFOLIO" },
                { given: "EDGM", solution: "ACKNOWLEDGMENT" },
                { given: "PTCY", solution: "BANKRUPTCY" },
                { given: "NWID", solution: "NATIONWIDE" },
                { given: "MBNA", solution: "THUMBNAIL" },
                { given: "DTRA", solution: "SOUNDTRACK" },
                { given: "ESKT", solution: "DESKTOP" },
                { given: "PPOI", "solution": "APPOINT" }
            ];

            let currentProblem = null;
            let currentProblemIndex = -1;

            // --- DOM Elements ---
            const gameContainer = document.querySelector('.game-container'); 
            const inputBefore = document.getElementById('input-before');
            const givenLettersSpan = document.getElementById('given-letters');
            const inputAfter = document.getElementById('input-after');
            const newButton = document.getElementById('new-button');
            const resetButton = document.getElementById('reset-button');
            const solutionButton = document.getElementById('solution-button');

            // --- Game State ---
            let isSolved = false;

            // --- Select a New Problem ---
            function selectNewProblem() {
                if (problemsList.length === 0) {
                    givenLettersSpan.textContent = "Error";
                    return;
                }
                let newIndex;
                if (problemsList.length === 1) {
                    newIndex = 0;
                } else {
                    do {
                        newIndex = Math.floor(Math.random() * problemsList.length);
                    } while (newIndex === currentProblemIndex && problemsList.length > 1);
                }
                currentProblemIndex = newIndex;
                currentProblem = problemsList[currentProblemIndex];
                initializeGame();
            }

            // --- Initialize Game for the currentProblem ---
            function initializeGame() {
                if (!currentProblem) {
                    if (problemsList.length > 0) selectNewProblem();
                    return;
                }
                gameContainer.classList.remove('solved'); 
                givenLettersSpan.textContent = currentProblem.given.toUpperCase(); 
                
                inputBefore.value = '';
                inputAfter.value = '';
                
                inputBefore.placeholder = '...'; 
                inputAfter.placeholder = '...';  
                inputBefore.disabled = false;
                inputAfter.disabled = false;
                inputBefore.focus(); 
                isSolved = false;
            }

            // --- Check Input ---
            function checkInput() {
                if (!currentProblem) return; 

                const beforeText = inputBefore.value.toUpperCase();
                const afterText = inputAfter.value.toUpperCase();
                const givenText = currentProblem.given.toUpperCase(); 
                const solutionText = currentProblem.solution.toUpperCase();
                const formedWord = beforeText + givenText + afterText;

                if (formedWord === solutionText) {
                    if (!isSolved) { 
                        gameContainer.classList.add('solved'); 
                        isSolved = true;
                        inputBefore.disabled = true;
                        inputAfter.disabled = true;
                    }
                } else {
                    if (isSolved) {
                        gameContainer.classList.remove('solved'); 
                        isSolved = false;
                        inputBefore.disabled = false;
                        inputAfter.disabled = false;
                    }
                }
            }

            // --- Event Listeners ---
            inputBefore.addEventListener('input', checkInput);
            inputAfter.addEventListener('input', checkInput);
            newButton.addEventListener('click', selectNewProblem);
            resetButton.addEventListener('click', () => {
                if (currentProblem) initializeGame();
            });
            solutionButton.addEventListener('click', () => {
                if (!currentProblem) return;
                const solution = currentProblem.solution;
                const given = currentProblem.given;
                const indexOfGiven = solution.toUpperCase().indexOf(given.toUpperCase());
                if (indexOfGiven !== -1) {
                    inputBefore.value = solution.substring(0, indexOfGiven);
                    inputAfter.value = solution.substring(indexOfGiven + given.length);
                } else {
                    inputBefore.value = '';
                    inputAfter.value = solution;
                }
                checkInput(); 
            });

            // --- Start the game by selecting the first problem ---
            selectNewProblem(); 
        });
    </script>
</body>
</html>
